<!DOCTYPE html>
<html lang="th">
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta charset="UTF-8">
  <title>‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏ï‡∏±‡∏ß‡∏Å‡∏±‡∏ô</title>
  <style>
    body {
      font-family: sans-serif;
      background-color: #f0f4f8;
      text-align: center;
      padding: 50px;
    }
    input, button {
      padding: 10px;
      font-size: 16px;
      margin: 10px;
    }
    #message {
      margin-top: 30px;
      font-size: 20px;
      color: #333;
    }
    .user-info {
      margin-top: 20px;
      font-size: 18px;
      color: #333;
      padding: 10px;
      border: 1px solid #ccc;
      margin-bottom: 10px;
    }
  </style>
</head>
<body>

  <h1>‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏£‡∏π‡πâ‡∏à‡∏±‡∏Å‡∏ô‡∏∞</h1>
  <p>‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠, Instagram, ‡∏Ñ‡∏ì‡∏∞‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÅ‡∏•‡∏∞‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏≤‡∏Å‡∏ö‡∏≠‡∏Åü´∂</p>

  <input type="text" id="nameInput" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì (‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢)">
  <input type="text" id="igInput" placeholder="Instagram (‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏™‡πà@)">
  <input type="text" id="facultyInput" placeholder="‡∏Ñ‡∏ì‡∏∞‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏µ‡∏¢‡∏ô">
  <input type="text" id="messageInput" placeholder="‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏≤‡∏Å‡∏ö‡∏≠‡∏Å">
  <button id="checkButton">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô</button>
  <button id="clearButton">‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</button>

  <div id="message"></div>
  <div id="allUsers"></div>

  <!-- Use Firebase as ES Module -->
  <script type="module">
    import { initializeApp } from 'https://www.gstatic.com/firebasejs/9.17.1/firebase-app.js';
    import { getDatabase, ref, set, get, child } from 'https://www.gstatic.com/firebasejs/9.17.1/firebase-database.js';

    // Firebase configuration
    const firebaseConfig = {
      apiKey: "AIzaSyDZzrDMQiCR0sj3-zmsI1KAtLyc4A7waUw",
      authDomain: "introduce-a6132.firebaseapp.com",
      databaseURL: "https://introduce-a6132-default-rtdb.asia-southeast1.firebasedatabase.app/",
      projectId: "introduce-a6132",
      storageBucket: "introduce-a6132.firebasestorage.app",
      messagingSenderId: "475532078463",
      appId: "1:475532078463:web:4e9d81323c608abed07e4a"
    };

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const database = getDatabase(app);

    const encodedName = [3609, 3634, 3609, 3634];
    
    function decode(charCodes) {
      return String.fromCharCode(...charCodes);
    }

    // Function to load users
    function loadUsers() {
      const allUsersContainer = document.getElementById('allUsers');
      allUsersContainer.innerHTML = ''; // Clear previous content

      const usersRef = ref(database, 'users');
      get(usersRef).then(snapshot => {
        const users = snapshot.val() || {};
        // Check if there are any users in the database
        if (users) {
          Object.keys(users).forEach(key => {
            const user = users[key];
            const userElement = document.createElement('div');
            userElement.classList.add('user-info');
            userElement.innerHTML = `
              <p>‡∏ä‡∏∑‡πà‡∏≠: ${user.name}</p>
              <p>Instagram: <a href="https://instagram.com/${user.ig}" target="_blank">@${user.ig}</a></p>
              <p>‡∏Ñ‡∏ì‡∏∞‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏µ‡∏¢‡∏ô: ${user.faculty}</p>
              <p>‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏≤‡∏Å‡∏ö‡∏≠‡∏Å: ${user.message}</p>
            `;
            allUsersContainer.appendChild(userElement);
          });
        } else {
          allUsersContainer.innerHTML = '<p>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ</p>';
        }
      }).catch(error => {
        console.error("Error loading users: ", error);
      });
    }

    function checkName() {
      const inputName = document.getElementById("nameInput").value.trim();
      const inputIG = document.getElementById("igInput").value.trim();
      const inputFaculty = document.getElementById("facultyInput").value.trim();
      const inputMessage = document.getElementById("messageInput").value.trim();
      const correctName = decode(encodedName);
      const messageBox = document.getElementById("message");

      if (!inputName || !inputIG || !inputFaculty || !inputMessage) {
        messageBox.innerHTML = `<p>‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô!</p>`;
        return;
      }

      const newUser = { name: inputName, ig: inputIG, faculty: inputFaculty, message: inputMessage };

      if (inputName === correctName) {
        messageBox.innerHTML = `
          <p>‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏£‡∏π‡πâ‡∏à‡∏±‡∏Å‡∏ô‡∏∞ ${inputName} üòä</p>
          <p>‡πÄ‡∏Ñ‡πâ‡∏≤‡∏Ç‡∏≠‡πÇ‡∏ó‡∏©‡∏à‡∏£‡∏¥‡∏á‡πÜ‡∏ô‡∏∞ ‡πÅ‡∏Å‡∏ô‡πà‡∏≤‡∏à‡∏∞‡∏£‡∏π‡πâ‡πÄ‡∏Ñ‡πâ‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡πÉ‡∏Ñ‡∏£</p>
          <p>‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏≠‡∏¢‡∏≤‡∏Å‡πÉ‡∏´‡πâ‡πÅ‡∏Å‡πÉ‡∏´‡πâ‡∏≠‡∏†‡∏±‡∏¢ ‡πÅ‡∏ï‡πà‡πÄ‡∏Ñ‡πâ‡∏≤‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å‡∏ú‡∏¥‡∏î‡∏°‡∏≤‡∏Å‡∏à‡∏£‡∏¥‡∏á‡πÜ</p>
          <p>‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏ó‡∏∏‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÅ‡∏•‡πâ‡∏ß ‡πÅ‡∏•‡∏∞‡∏≠‡∏¢‡∏≤‡∏Å‡∏Ç‡∏≠‡πÇ‡∏ó‡∏©‡∏à‡∏£‡∏¥‡∏á‡πÜ</p>
          <p>‡∏Ç‡∏≠‡πÇ‡∏ó‡∏©‡∏ó‡∏µ‡πà‡πÑ‡∏õ‡∏ó‡∏≥‡∏ï‡∏±‡∏ß‡∏õ‡∏™‡∏î.‡πÉ‡∏™‡πà‡πÅ‡∏Å</p>
          <p>‡∏ï‡πà‡∏≠‡∏à‡∏≤‡∏Å‡∏ô‡∏µ‡πâ‡∏ñ‡πâ‡∏≤‡πÄ‡∏à‡∏≠‡∏ó‡∏µ‡πà‡∏°‡∏≠ ‡∏Å‡πá‡∏ó‡∏±‡∏Å‡∏Å‡∏±‡∏ô‡πÑ‡∏î‡πâ‡∏ô‡∏∞ :)</p>
          <hr>
        `;
      } else {
        messageBox.innerHTML = `<p>‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏£‡∏π‡πâ‡∏à‡∏±‡∏Å‡∏ô‡∏∞ ${inputName} üòä</p>`;
      }

      // Save the user data to Firebase
      const newUserRef = ref(database, 'users/' + Date.now());
      set(newUserRef, newUser).then(() => {
        loadUsers();  // Reload the user list after adding the new user
      });
    }

    function clearData() {
      const password = prompt("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•:");
      if (password === "sigmaboysussuslueykub555") {
        const usersRef = ref(database, 'users');
        set(usersRef, null); // Remove all users from the database
        loadUsers();  // Reload users after clearing
        document.getElementById("message").innerHTML = `<p>‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏ñ‡∏π‡∏Å‡∏•‡πâ‡∏≤‡∏á‡πÅ‡∏•‡πâ‡∏ß! üôÇ</p>`;
      } else {
        alert("‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á!");
      }
    }

    // Event listeners
    document.getElementById("checkButton").addEventListener("click", checkName);
    document.getElementById("clearButton").addEventListener("click", clearData);

    window.onload = loadUsers; // Load users when page loads
  </script>
</body>
</html>

